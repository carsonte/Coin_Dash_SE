# Global configuration (UTC based)

# 浜ゆ槗鍝佺鍒楄〃
symbols:
  - BTCUSDm
  - ETHUSDm
  - XAUUSDm

enable_multi_model_committee: true

live:
  symbols:
    - BTCUSDm
    - ETHUSDm
    - XAUUSDm

timeframes:
  lookback_bars: 320          # 鍚勫懆鏈熸渶澶氫繚鐣欑殑K绾挎暟閲?
  filter_fast: 30m            # 蹇懆鏈燂紝鐢ㄤ簬璁＄畻鐗瑰緛/ATR
  filter_slow: 1h             # 鎱㈠懆鏈燂紝鐢ㄤ簬鐗瑰緛/ATR
  eth_aux: 15m                # ETH 杈呭姪鍛ㄦ湡
  defs:                       # 鍚勫懆鏈熷畾涔夛紙鍒嗛挓銆丄TR/鎴愪氦閲忓紓甯搁槇鍊硷級
    1d:
      minutes: 1440
      atr_spike: 5.0
      volume_jump: 5.0
    4h:
      minutes: 240
      atr_spike: 4.0
      volume_jump: 4.0
    1h:
      minutes: 60
      atr_spike: 3.5
      volume_jump: 3.0
    30m:
      minutes: 30
      atr_spike: 3.0
      volume_jump: 2.5
    15m:
      minutes: 15
      atr_spike: 2.8
      volume_jump: 2.3

data:
  provider: mt5_api
  mt5_api:
    base_url: "http://43.156.27.55:5005"

llm:
  glm:  # 鍏煎鍛藉悕锛屽疄闄呮寚鍚?Qwen
    api_base: "https://api.ezworkapi.top"
    model: "qwen-turbo-2025-07-15"
  glm_fallback: {}
  gpt4omini:
    api_base: "https://aizex.top"
    model: "gpt-4o-mini"

market_filter:
  # 娲昏穬搴﹂槇鍊硷紙AI鐗堝凡涓嶅啀闄愬埗锛屼粎淇濈暀瀛楁锛?
  score_thresholds:
    BTCUSDT: 0.55
    ETHUSDT: 0.72
  weights:
    atr_norm: 0.4
    bb_width_norm: 0.35
    vol_change_norm: 0.25
  smoothing_weights:
    fast: 0.7
    slow: 0.3
  silent:
    low_vol_consecutive: 3
    resume_consecutive: 2

risk:
  risk_per_trade: 0.01        # 鍗曠瑪椋庨櫓鍗犲噣鍊兼瘮渚嬶紙AI浠撲綅涓嶆寚瀹氭椂鐨勫厹搴曠畻娉曪級
  validation_enabled: false   # 鏄惁鍚敤鏈湴椋庢帶鏍￠獙锛堜环鏍奸『搴?RR 杈圭晫锛夛紝榛樿鍏抽棴
  rr_bounds:
    min: 1.5
    max: 5.0
  sl_atr_mult: 1.5
  tp_atr_mult: 3.0
  stop_buffer_pct: 0.015
  stop_atr_cap: 3.0
  trade_type_modifiers:       # 浜ゆ槗绫诲瀷鍙傛暟锛圓I鑷富鐗堝ぇ澶氬凡涓嶇敓鏁堬紝浠呯暀浣滃弬鑰冿級
    trend: { position_scale: 1.0, min_confidence: 75, min_rr: 1.5, stop_atr_mult: 3.0 }
    reverse_minor: { position_scale: 0.7, min_confidence: 80, min_rr: 3.0, stop_atr_mult: 4.0 }
    reverse_major: { position_scale: 0.5, min_confidence: 85, min_rr: 4.0, stop_atr_mult: 4.0 }

signals:
  cooldown_minutes: 30        # 淇″彿鍐峰嵈锛圓I鐗堝凡鏀惧紑锛?
  review_interval_minutes: 60 # 澶嶈瘎鏈€灏忛棿闅?
  review_price_atr: 0.8       # 浠锋牸鍋忕瑙﹀彂澶嶈瘎鐨?ATR 鍊嶆暟
  review_max_context: 5       # 澶嶈瘎涓婁笅鏂囪疆娆?
  expiry_hours:               # 涓嶅悓甯傚満妯″紡涓嬬殑淇″彿杩囨湡鏃堕棿
    trending: 6
    channeling: 6
    ranging: 4
    breakout: 2
    reversal: 3
  max_same_direction: 3       # 鍚屽悜鍏佽鐨勬渶澶ф椿璺冧俊鍙锋暟锛圓I鐗堝凡鏀惧紑锛?
event_triggers:
  enabled: false              # 鏈湴浜嬩欢瑙﹀彂灞傦細涓?false 鏃朵繚鎸佺幇鏈夎涓猴紱true 鏃舵棤浜嬩欢灏嗚烦杩囧ぇ妯″瀷璋冪敤
glm_filter:
  enabled: true               # Qwen 棰勮繃婊ゅ眰寮€鍏筹紱false 鏃剁洿鎺ヨ繘鍏?DeepSeek锛堜繚鎸佹棫琛屼负锛?
  on_error: call_deepseek     # call_deepseek | hold锛欸LM 寮傚父鏃剁殑鍏滃簳绛栫暐

deepseek:
  enabled: true
  model: deepseek-chat
  review_model: deepseek-chat
  api_base: https://api.deepseek.com
  timeout: 30
  temperature: 0.1
  max_tokens: 2000
  stream: false
  budget:
    daily_tokens: 200000      # 姣忔棩 token 涓婇檺
    warn_ratio: 0.8           # 棰勮姣斾緥
  retry:
    max_attempts: 3
    backoff_seconds: 1.5

exchange:
  name: binance               # 浜ゆ槗鎵€
  type: futures               # 鐜拌揣/鍚堢害
  rate_limit: true            # 鏄惁鎵撳紑闄愰

backtest:
  initial_equity: 10000        # 鍒濆璧勯噾
  fee_rate: 0.0004            # 鎵嬬画璐圭巼

database:
  enabled: true
  dsn: sqlite:///state/coin_dash_se.db
  pool_size: 5
  echo: false
  auto_migrate: true

performance:
  report_hour_utc8: 23
  safe_mode_enabled: false       # 鏄惁鍚敤瀹夊叏妯″紡寮€浠撻檺鍒讹紝榛樿鍏抽棴浠ヤ繚鎸佸師琛屼负
  safe_mode:
    consecutive_stop_losses: 5  # 瀹夊叏妯″紡瑙﹀彂闃堝€硷紙AI鐗堥粯璁ゅ凡涓嶅惎鐢級
  adaptive_thresholds:           # 鑷€傚簲闃堝€艰缃紙AI鐗堝凡鍏抽棴闃堝€艰皟鏁达級
    profit_factor_min: 1.1
    win_rate_min: 0.35
    avg_rr_min: 1.3
    threshold_adjustment: 0.1
  instant_push: true             # 姝㈢泩/姝㈡崯瑙﹀彂鍚庣珛鍗虫帹閫佺哗鏁堝崱鐗?
  instant_cooldown_minutes: 30   # 瀹炴椂鍗＄墖鎺ㄩ€佹渶灏忛棿闅旓紙鍒嗛挓锛?

notifications:
  lark_webhook: ""            # 椋炰功 Webhook锛堜紭鍏?.env锛?

log:
  level: DEBUG                # 鏃ュ織绾у埆

# LLM 瀹㈡埛绔幆澧冨彉閲忔彁绀猴紙涓嶅湪姝ゆ枃浠朵腑閰嶇疆锛夛細
# - QWEN_API_KEY / QWEN_API_BASE / QWEN_MODEL锛堥粯璁?https://api.ezworkapi.top, qwen-turbo-2025-07-15锛?
# - AIZEX_API_KEY / AIZEX_API_BASE锛圤penAI 鍏煎锛実pt-4o-mini锛?

